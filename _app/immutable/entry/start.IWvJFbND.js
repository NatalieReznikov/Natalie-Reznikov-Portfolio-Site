import{o as ke,t as Ae}from"../chunks/scheduler.K8eMyfn6.js";import{S as yt,a as mt,b as _t,H as G,N as W,r as re,o as Oe,P as Re,f as rt,g as $e,c as pe,i as Ie,s as Ce,d as K,e as q,h as ot,j as It}from"../chunks/singletons.osYD2Zi9.js";new URL("sveltekit-internal://");function Pt(e,a){return e==="/"||a==="ignore"?e:a==="never"?e.endsWith("/")?e.slice(0,-1):e:a==="always"&&!e.endsWith("/")?e+"/":e}function jt(e){return e.split("%25").map(decodeURI).join("%25")}function xt(e){for(const a in e)e[a]=decodeURIComponent(e[a]);return e}function Pe({href:e}){return e.split("#")[0]}const Lt=["href","pathname","search","toString","toJSON"];function Nt(e,a,i){const o=new URL(e);Object.defineProperty(o,"searchParams",{value:new Proxy(o.searchParams,{get(h,c){if(c==="get"||c==="getAll"||c==="has")return f=>(i(f),h[c](f));a();const w=Reflect.get(h,c);return typeof w=="function"?w.bind(h):w}}),enumerable:!0,configurable:!0});for(const h of Lt)Object.defineProperty(o,h,{get(){return a(),e[h]},enumerable:!0,configurable:!0});return Ut(o),o}function Ut(e){Object.defineProperty(e,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const Tt="/__data.json",Ct=".html__data.json";function Dt(e){return e.endsWith(".html")?e.replace(/\.html$/,Ct):e.replace(/\/$/,"")+Tt}function Mt(...e){let a=5381;for(const i of e)if(typeof i=="string"){let o=i.length;for(;o;)a=a*33^i.charCodeAt(--o)}else if(ArrayBuffer.isView(i)){const o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);let h=o.length;for(;h;)a=a*33^o[--h]}else throw new TypeError("value must be a string or TypedArray");return(a>>>0).toString(36)}const wt=window.fetch;window.fetch=(e,a)=>((e instanceof Request?e.method:(a==null?void 0:a.method)||"GET")!=="GET"&&se.delete(De(e)),wt(e,a));const se=new Map;function Ft(e){const a=atob(e),i=new Uint8Array(a.length);for(let o=0;o<a.length;o++)i[o]=a.charCodeAt(o);return i.buffer}function Vt(e,a){const i=De(e,a),o=document.querySelector(i);if(o!=null&&o.textContent){let{body:h,...c}=JSON.parse(o.textContent);const w=o.getAttribute("data-ttl");return w&&se.set(i,{body:h,init:c,ttl:1e3*Number(w)}),o.getAttribute("data-b64")!==null&&(h=Ft(h)),Promise.resolve(new Response(h,c))}return window.fetch(e,a)}function Bt(e,a,i){if(se.size>0){const o=De(e,i),h=se.get(o);if(h){if(performance.now()<h.ttl&&["default","force-cache","only-if-cached",void 0].includes(i==null?void 0:i.cache))return new Response(h.body,h.init);se.delete(o)}}return window.fetch(a,i)}function De(e,a){let o=`script[data-sveltekit-fetched][data-url=${JSON.stringify(e instanceof Request?e.url:e)}]`;if(a!=null&&a.headers||a!=null&&a.body){const h=[];a.headers&&h.push([...new Headers(a.headers)].join(",")),a.body&&(typeof a.body=="string"||ArrayBuffer.isView(a.body))&&h.push(a.body),o+=`[data-hash="${Mt(...h)}"]`}return o}const Ht=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function qt(e){const a=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${Gt(e).map(o=>{const h=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(o);if(h)return a.push({name:h[1],matcher:h[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const c=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(o);if(c)return a.push({name:c[1],matcher:c[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!o)return;const w=o.split(/\[(.+?)\](?!\])/);return"/"+w.map((y,l)=>{if(l%2){if(y.startsWith("x+"))return je(String.fromCharCode(parseInt(y.slice(2),16)));if(y.startsWith("u+"))return je(String.fromCharCode(...y.slice(2).split("-").map(k=>parseInt(k,16))));const g=Ht.exec(y);if(!g)throw new Error(`Invalid param: ${y}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,v,x,A,N]=g;return a.push({name:A,matcher:N,optional:!!v,rest:!!x,chained:x?l===1&&w[0]==="":!1}),x?"(.*?)":v?"([^/]*)?":"([^/]+?)"}return je(y)}).join("")}).join("")}/?$`),params:a}}function Jt(e){return!/^\([^)]+\)$/.test(e)}function Gt(e){return e.slice(1).split("/").filter(Jt)}function Kt(e,a,i){const o={},h=e.slice(1),c=h.filter(f=>f!==void 0);let w=0;for(let f=0;f<a.length;f+=1){const y=a[f];let l=h[f-w];if(y.chained&&y.rest&&w&&(l=h.slice(f-w,f+1).filter(g=>g).join("/"),w=0),l===void 0){y.rest&&(o[y.name]="");continue}if(!y.matcher||i[y.matcher](l)){o[y.name]=l;const g=a[f+1],v=h[f+1];g&&!g.rest&&g.optional&&v&&y.chained&&(w=0),!g&&!v&&Object.keys(o).length===c.length&&(w=0);continue}if(y.optional&&y.chained){w++;continue}return}if(!w)return o}function je(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function Yt({nodes:e,server_loads:a,dictionary:i,matchers:o}){const h=new Set(a);return Object.entries(i).map(([f,[y,l,g]])=>{const{pattern:v,params:x}=qt(f),A={id:f,exec:N=>{const k=v.exec(N);if(k)return Kt(k,x,o)},errors:[1,...g||[]].map(N=>e[N]),layouts:[0,...l||[]].map(w),leaf:c(y)};return A.errors.length=A.layouts.length=Math.max(A.errors.length,A.layouts.length),A});function c(f){const y=f<0;return y&&(f=~f),[y,e[f]]}function w(f){return f===void 0?f:[h.has(f),e[f]]}}function Me(e,a=JSON.parse){try{return a(sessionStorage[e])}catch{}}function xe(e,a,i=JSON.stringify){const o=i(a);try{sessionStorage[e]=o}catch{}}class Le extends Error{constructor(a,i){super(a),this.name="DevalueError",this.path=i.join("")}}function st(e){return Object(e)!==e}const zt=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wt(e){const a=Object.getPrototypeOf(e);return a===Object.prototype||a===null||Object.getOwnPropertyNames(a).sort().join("\0")===zt}function Xt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Zt(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function ee(e){let a="",i=0;const o=e.length;for(let h=0;h<o;h+=1){const c=e[h],w=Zt(c);w&&(a+=e.slice(i,h)+w,i=h+1)}return`"${i===0?e:a+e.slice(i)}"`}const Fe=-1,vt=-2,bt=-3,Et=-4,St=-5,Ve=-6;function Qt(e,a){return kt(JSON.parse(e),a)}function kt(e,a){if(typeof e=="number")return h(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const i=e,o=Array(i.length);function h(c,w=!1){if(c===Fe)return;if(c===bt)return NaN;if(c===Et)return 1/0;if(c===St)return-1/0;if(c===Ve)return-0;if(w)throw new Error("Invalid input");if(c in o)return o[c];const f=i[c];if(!f||typeof f!="object")o[c]=f;else if(Array.isArray(f))if(typeof f[0]=="string"){const y=f[0],l=a==null?void 0:a[y];if(l)return o[c]=l(h(f[1]));switch(y){case"Date":o[c]=new Date(f[1]);break;case"Set":const g=new Set;o[c]=g;for(let A=1;A<f.length;A+=1)g.add(h(f[A]));break;case"Map":const v=new Map;o[c]=v;for(let A=1;A<f.length;A+=2)v.set(h(f[A]),h(f[A+1]));break;case"RegExp":o[c]=new RegExp(f[1],f[2]);break;case"Object":o[c]=Object(f[1]);break;case"BigInt":o[c]=BigInt(f[1]);break;case"null":const x=Object.create(null);o[c]=x;for(let A=1;A<f.length;A+=2)x[f[A]]=h(f[A+1]);break;default:throw new Error(`Unknown type ${y}`)}}else{const y=new Array(f.length);o[c]=y;for(let l=0;l<f.length;l+=1){const g=f[l];g!==vt&&(y[l]=h(g))}}else{const y={};o[c]=y;for(const l in f){const g=f[l];y[l]=h(g)}}return o[c]}return h(0)}function en(e,a){const i=[],o=new Map,h=[];for(const l in a)h.push({key:l,fn:a[l]});const c=[];let w=0;function f(l){if(typeof l=="function")throw new Le("Cannot stringify a function",c);if(o.has(l))return o.get(l);if(l===void 0)return Fe;if(Number.isNaN(l))return bt;if(l===1/0)return Et;if(l===-1/0)return St;if(l===0&&1/l<0)return Ve;const g=w++;o.set(l,g);for(const{key:x,fn:A}of h){const N=A(l);if(N)return i[g]=`["${x}",${f(N)}]`,g}let v="";if(st(l))v=Ne(l);else switch(Xt(l)){case"Number":case"String":case"Boolean":v=`["Object",${Ne(l)}]`;break;case"BigInt":v=`["BigInt",${l}]`;break;case"Date":v=`["Date","${l.toISOString()}"]`;break;case"RegExp":const{source:A,flags:N}=l;v=N?`["RegExp",${ee(A)},"${N}"]`:`["RegExp",${ee(A)}]`;break;case"Array":v="[";for(let k=0;k<l.length;k+=1)k>0&&(v+=","),k in l?(c.push(`[${k}]`),v+=f(l[k]),c.pop()):v+=vt;v+="]";break;case"Set":v='["Set"';for(const k of l)v+=`,${f(k)}`;v+="]";break;case"Map":v='["Map"';for(const[k,T]of l)c.push(`.get(${st(k)?Ne(k):"..."})`),v+=`,${f(k)},${f(T)}`;v+="]";break;default:if(!Wt(l))throw new Le("Cannot stringify arbitrary non-POJOs",c);if(Object.getOwnPropertySymbols(l).length>0)throw new Le("Cannot stringify POJOs with symbolic keys",c);if(Object.getPrototypeOf(l)===null){v='["null"';for(const k in l)c.push(`.${k}`),v+=`,${ee(k)},${f(l[k])}`,c.pop();v+="]"}else{v="{";let k=!1;for(const T in l)k&&(v+=","),k=!0,c.push(`.${T}`),v+=`${ee(T)}:${f(l[T])}`,c.pop();v+="}"}}return i[g]=v,g}const y=f(e);return y<0?`${y}`:`[${i.join(",")}]`}function Ne(e){const a=typeof e;return a==="string"?ee(e):e instanceof String?ee(e.toString()):e===void 0?Fe.toString():e===0&&1/e<0?Ve.toString():a==="bigint"?`["BigInt","${e}"]`:String(e)}const At=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...At];const tn=new Set([...At]);[...tn];function nn(e){return e.filter(a=>a!=null)}class ye{constructor(a,i){this.status=a,typeof i=="string"?this.body={message:i}:i?this.body=i:this.body={message:`Error: ${a}`}}toString(){return JSON.stringify(this.body)}}class it{constructor(a,i){this.status=a,this.location=i}}class Be extends Error{constructor(a,i,o){super(o),this.status=a,this.text=i}}const an="x-sveltekit-invalidated",rn="x-sveltekit-trailing-slash";function he(e){return e instanceof ye||e instanceof Be?e.status:500}function on(e){return e instanceof Be?e.text:"Internal Error"}var pt;const X=(pt=Me(yt))!=null?pt:{};var ht;const oe=(ht=Me(mt,Qt))!=null?ht:{};var gt;const ie=(gt=Me(_t))!=null?gt:{},ct=history.pushState,ge=history.replaceState;function Ue(e){X[e]=Ce()}function lt(e,a){let i=e+1;for(;X[i];)delete X[i],i+=1;for(i=a+1;ie[i];)delete ie[i],i+=1}function Q(e){return location.href=e.href,new Promise(()=>{})}function ft(){}function sn(e,a){var et,tt;const i=Yt(e),o=e.nodes[0],h=e.nodes[1];o(),h();const c=document.documentElement,w=[],f=[];let y=null;const l={before_navigate:[],on_navigate:[],after_navigate:[]};let g={branch:[],error:null,url:null},v=!1,x=!1,A=!0,N=!1,k=!1,T=!1,ce=!1,Y=!1,B,D=(et=history.state)==null?void 0:et[G],V=(tt=history.state)==null?void 0:tt[W];D||(D=V=Date.now(),ge.call(history,{...history.state,[G]:D,[W]:V},"",location.href));const me=X[D];me&&(history.scrollRestoration="manual",scrollTo(me.x,me.y));let C,Z,_e;async function He(){if(await(_e||(_e=Promise.resolve())),!_e)return;_e=null;const n=ne(g.url,!0);y=null;const r=Z={},t=n&&await be(n);r===Z&&(t&&(t.type==="redirect"?await le(new URL(t.location,g.url).href,{},1,r):(t.props.page!==void 0&&(C=t.props.page),B.$set(t.props))),w.length=0)}function qe(n){f.some(r=>r==null?void 0:r.snapshot)&&(ie[n]=f.map(r=>{var t;return(t=r==null?void 0:r.snapshot)==null?void 0:t.capture()}))}function Je(n){var r;(r=ie[n])==null||r.forEach((t,u)=>{var s,p;(p=(s=f[u])==null?void 0:s.snapshot)==null||p.restore(t)})}function Ge(){Ue(D),xe(yt,X),qe(V),xe(_t,ie),xe(mt,oe,en)}async function le(n,r,t,u){return de({type:"goto",url:re(n),keepfocus:r.keepFocus,noscroll:r.noScroll,replace_state:r.replaceState,redirect_count:t,state:r.state,nav_token:u,accept:()=>{r.invalidateAll&&(Y=!0)}})}async function Ke(n){return y={id:n.id,promise:be(n).then(r=>(r.type==="loaded"&&r.state.error&&(y=null),r))},y.promise}async function fe(n){const r=i.find(t=>t.exec(Xe(n)));r&&await Promise.all([...r.layouts,r.leaf].map(t=>t==null?void 0:t[1]()))}function Ye(n){var u,s;g=n.state;const r=document.querySelector("style[data-sveltekit]");r&&r.remove(),C=n.props.page,B=new e.root({target:a,props:{...n.props,stores:K,components:f},hydrate:!0}),Je(V);const t={from:null,to:{params:g.params,route:{id:(s=(u=g.route)==null?void 0:u.id)!=null?s:null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};l.after_navigate.forEach(p=>p(t)),x=!0}async function te({url:n,params:r,branch:t,status:u,error:s,route:p,form:d}){var L;let b="never";for(const j of t)(j==null?void 0:j.slash)!==void 0&&(b=j.slash);n.pathname=Pt(n.pathname,b),n.search=n.search;const m={type:"loaded",state:{url:n,params:r,branch:t,error:s,route:p},props:{constructors:nn(t).map(j=>j.node.component),page:C}};d!==void 0&&(m.props.form=d);let S={},$=!C,R=0;for(let j=0;j<Math.max(t.length,g.branch.length);j+=1){const O=t[j],F=g.branch[j];(O==null?void 0:O.data)!==(F==null?void 0:F.data)&&($=!0),O&&(S={...S,...O.data},$&&(m.props[`data_${R}`]=S),R+=1)}return(!g.url||n.href!==g.url.href||g.error!==s||d!==void 0&&d!==C.form||$)&&(m.props.page={error:s,params:r,route:{id:(L=p==null?void 0:p.id)!=null?L:null},state:{},status:u,url:new URL(n),form:d!=null?d:null,data:$?S:C.data}),m}async function we({loader:n,parent:r,url:t,params:u,route:s,server_data_node:p}){var $,R,I,L,j,O,F;let d=null,b=!0;const m={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},S=await n();if(($=S.universal)!=null&&$.load){let H=function(...E){for(const _ of E){const{href:P}=new URL(_,t);m.dependencies.add(P)}};const J={route:new Proxy(s,{get:(E,_)=>(b&&(m.route=!0),E[_])}),params:new Proxy(u,{get:(E,_)=>(b&&m.params.add(_),E[_])}),data:(R=p==null?void 0:p.data)!=null?R:null,url:Nt(t,()=>{b&&(m.url=!0)},E=>{b&&m.search_params.add(E)}),async fetch(E,_){let P;E instanceof Request?(P=E.url,_={body:E.method==="GET"||E.method==="HEAD"?void 0:await E.blob(),cache:E.cache,credentials:E.credentials,headers:E.headers,integrity:E.integrity,keepalive:E.keepalive,method:E.method,mode:E.mode,redirect:E.redirect,referrer:E.referrer,referrerPolicy:E.referrerPolicy,signal:E.signal,..._}):P=E;const U=new URL(P,t);return b&&H(U.href),U.origin===t.origin&&(P=U.href.slice(t.origin.length)),x?Bt(P,U.href,_):Vt(P,_)},setHeaders:()=>{},depends:H,parent(){return b&&(m.parent=!0),r()},untrack(E){b=!1;try{return E()}finally{b=!0}}};d=(I=await S.universal.load.call(null,J))!=null?I:null}return{node:S,loader:n,server:p,universal:(L=S.universal)!=null&&L.load?{type:"data",data:d,uses:m}:null,data:(j=d!=null?d:p==null?void 0:p.data)!=null?j:null,slash:q&&(t.pathname===q||t.pathname===q+"/")?"always":(F=(O=S.universal)==null?void 0:O.trailingSlash)!=null?F:p==null?void 0:p.slash}}function ze(n,r,t,u,s,p){if(Y)return!0;if(!s)return!1;if(s.parent&&n||s.route&&r||s.url&&t)return!0;for(const d of s.search_params)if(u.has(d))return!0;for(const d of s.params)if(p[d]!==g.params[d])return!0;for(const d of s.dependencies)if(w.some(b=>b(new URL(d))))return!0;return!1}function ve(n,r){return(n==null?void 0:n.type)==="data"?n:(n==null?void 0:n.type)==="skip"&&r!=null?r:null}function Rt(n,r){if(!n)return new Set(r.searchParams.keys());const t=new Set([...n.searchParams.keys(),...r.searchParams.keys()]);for(const u of t){const s=n.searchParams.getAll(u),p=r.searchParams.getAll(u);s.every(d=>p.includes(d))&&p.every(d=>s.includes(d))&&t.delete(u)}return t}async function be({id:n,invalidating:r,url:t,params:u,route:s}){var E;if((y==null?void 0:y.id)===n)return y.promise;const{errors:p,layouts:d,leaf:b}=s,m=[...d,b];p.forEach(_=>_==null?void 0:_().catch(()=>{})),m.forEach(_=>_==null?void 0:_[1]().catch(()=>{}));let S=null;const $=g.url?n!==g.url.pathname+g.url.search:!1,R=g.route?s.id!==g.route.id:!1,I=Rt(g.url,t);let L=!1;const j=m.map((_,P)=>{var z;const U=g.branch[P],M=!!(_!=null&&_[0])&&((U==null?void 0:U.loader)!==_[1]||ze(L,R,$,I,(z=U.server)==null?void 0:z.uses,u));return M&&(L=!0),M});if(j.some(Boolean)){try{S=await ut(t,j)}catch(_){return ue({status:he(_),error:await ae(_,{url:t,params:u,route:{id:s.id}}),url:t,route:s})}if(S.type==="redirect")return S}const O=S==null?void 0:S.nodes;let F=!1;const H=m.map(async(_,P)=>{var Ee;if(!_)return;const U=g.branch[P],M=O==null?void 0:O[P];if((!M||M.type==="skip")&&_[1]===(U==null?void 0:U.loader)&&!ze(F,R,$,I,(Ee=U.universal)==null?void 0:Ee.uses,u))return U;if(F=!0,(M==null?void 0:M.type)==="error")throw M;return we({loader:_[1],url:t,params:u,route:s,parent:async()=>{var at;const nt={};for(let Se=0;Se<P;Se+=1)Object.assign(nt,(at=await H[Se])==null?void 0:at.data);return nt},server_data_node:ve(M===void 0&&_[0]?{type:"skip"}:M!=null?M:null,_[0]?U==null?void 0:U.server:void 0)})});for(const _ of H)_.catch(()=>{});const J=[];for(let _=0;_<m.length;_+=1)if(m[_])try{J.push(await H[_])}catch(P){if(P instanceof it)return{type:"redirect",location:P.location};let U=he(P),M;if(O!=null&&O.includes(P))U=(E=P.status)!=null?E:U,M=P.error;else if(P instanceof ye)M=P.body;else{if(await K.updated.check())return await Q(t);M=await ae(P,{params:u,url:t,route:{id:s.id}})}const z=await We(_,J,p);return z?await te({url:t,params:u,branch:J.slice(0,z.idx).concat(z.node),status:U,error:M,route:s}):await Qe(t,{id:s.id},M,U)}else J.push(void 0);return await te({url:t,params:u,branch:J,status:200,error:null,route:s,form:r?void 0:null})}async function We(n,r,t){for(;n--;)if(t[n]){let u=n;for(;!r[u];)u-=1;try{return{idx:u+1,node:{node:await t[n](),loader:t[n],data:{},server:null,universal:null}}}catch{continue}}}async function ue({status:n,error:r,url:t,route:u}){var S;const s={};let p=null;if(e.server_loads[0]===0)try{const $=await ut(t,[!0]);if($.type!=="data"||$.nodes[0]&&$.nodes[0].type!=="data")throw 0;p=(S=$.nodes[0])!=null?S:null}catch{(t.origin!==Oe||t.pathname!==location.pathname||v)&&await Q(t)}const b=await we({loader:o,url:t,params:s,route:u,parent:()=>Promise.resolve({}),server_data_node:ve(p)}),m={node:await h(),loader:h,universal:null,server:null,data:null};return await te({url:t,params:s,branch:[b,m],status:n,error:r,route:null})}function ne(n,r){if(Ie(n,q))return;const t=Xe(n.pathname);for(const u of i){const s=u.exec(t);if(s)return{id:n.pathname+n.search,invalidating:r,route:u,params:xt(s),url:n}}}function Xe(n){return jt(n.slice(q.length)||"/")}function Ze({url:n,type:r,intent:t,delta:u}){let s=!1;const p=dt(g,t,n,r);u!==void 0&&(p.navigation.delta=u);const d={...p.navigation,cancel:()=>{s=!0,p.reject(new Error("navigation was cancelled"))}};return k||l.before_navigate.forEach(b=>b(d)),s?null:p}async function de({type:n,url:r,popped:t,keepfocus:u,noscroll:s,replace_state:p,state:d={},redirect_count:b=0,nav_token:m={},accept:S=ft,block:$=ft}){const R=ne(r,!1),I=Ze({url:r,type:n,delta:t==null?void 0:t.delta,intent:R});if(!I){$();return}const L=D,j=V;S(),k=!0,x&&K.navigating.set(I.navigation),Z=m;let O=R&&await be(R);if(!O){if(Ie(r,q))return await Q(r);O=await Qe(r,{id:null},await ae(new Be(404,"Not Found",`Not found: ${r.pathname}`),{url:r,params:{},route:{id:null}}),404)}if(r=(R==null?void 0:R.url)||r,Z!==m)return I.reject(new Error("navigation was aborted")),!1;if(O.type==="redirect")if(b>=20)O=await ue({status:500,error:await ae(new Error("Redirect loop"),{url:r,params:{},route:{id:null}}),url:r,route:{id:null}});else return le(new URL(O.location,r).href,{},b+1,m),!1;else O.props.page.status>=400&&await K.updated.check()&&await Q(r);if(w.length=0,Y=!1,N=!0,Ue(L),qe(j),O.props.page.url.pathname!==r.pathname&&(r.pathname=O.props.page.url.pathname),d=t?t.state:d,!t){const E=p?0:1,_={[G]:D+=E,[W]:V+=E};(p?ge:ct).call(history,_,"",r),p||lt(D,V)}if(oe[D]=d,y=null,O.props.page.state=d,x){g=O.state,O.props.page&&(O.props.page.url=r);const E=(await Promise.all(l.on_navigate.map(_=>_(I.navigation)))).filter(_=>typeof _=="function");if(E.length>0){let _=function(){l.after_navigate=l.after_navigate.filter(P=>!E.includes(P))};E.push(_),l.after_navigate.push(...E)}B.$set(O.props),ce=!0}else Ye(O);const{activeElement:F}=document;await Ae();const H=t?t.scroll:s?Ce():null;if(A){const E=r.hash&&document.getElementById(decodeURIComponent(r.hash.slice(1)));H?scrollTo(H.x,H.y):E?E.scrollIntoView():scrollTo(0,0)}const J=document.activeElement!==F&&document.activeElement!==document.body;!u&&!J&&Te(),A=!0,O.props.page&&(C=O.props.page),k=!1,n==="popstate"&&Je(V),I.fulfil(void 0),l.after_navigate.forEach(E=>E(I.navigation)),K.navigating.set(null),N=!1}async function Qe(n,r,t,u){return n.origin===Oe&&n.pathname===location.pathname&&!v?await ue({status:u,error:t,url:n,route:r}):await Q(n)}function $t(){let n;c.addEventListener("mousemove",p=>{const d=p.target;clearTimeout(n),n=setTimeout(()=>{u(d,2)},20)});function r(p){u(p.composedPath()[0],1)}c.addEventListener("mousedown",r),c.addEventListener("touchstart",r,{passive:!0});const t=new IntersectionObserver(p=>{for(const d of p)d.isIntersecting&&(fe(d.target.href),t.unobserve(d.target))},{threshold:0});function u(p,d){const b=rt(p,c);if(!b)return;const{url:m,external:S,download:$}=$e(b,q);if(S||$)return;const R=pe(b);if(!R.reload)if(d<=R.preload_data){const I=ne(m,!1);I&&Ke(I)}else d<=R.preload_code&&fe(m.pathname)}function s(){t.disconnect();for(const p of c.querySelectorAll("a")){const{url:d,external:b,download:m}=$e(p,q);if(b||m)continue;const S=pe(p);S.reload||(S.preload_code===ot.viewport&&t.observe(p),S.preload_code===ot.eager&&fe(d.pathname))}}l.after_navigate.push(s),s()}function ae(n,r){var s;if(n instanceof ye)return n.body;const t=he(n),u=on(n);return(s=e.hooks.handleError({error:n,event:r,status:t,message:u}))!=null?s:{message:u}}return{after_navigate:n=>{ke(()=>(l.after_navigate.push(n),()=>{const r=l.after_navigate.indexOf(n);l.after_navigate.splice(r,1)}))},before_navigate:n=>{ke(()=>(l.before_navigate.push(n),()=>{const r=l.before_navigate.indexOf(n);l.before_navigate.splice(r,1)}))},on_navigate:n=>{ke(()=>(l.on_navigate.push(n),()=>{const r=l.on_navigate.indexOf(n);l.on_navigate.splice(r,1)}))},disable_scroll_handling:()=>{(N||!x)&&(A=!1)},goto:(n,r={})=>(n=re(n),n.origin!==Oe?Promise.reject(new Error("goto: invalid URL")):le(n,r,0)),invalidate:n=>{if(typeof n=="function")w.push(n);else{const{href:r}=new URL(n,location.href);w.push(t=>t.href===r)}return He()},invalidate_all:()=>(Y=!0,He()),preload_data:async n=>{var d;const r=re(n),t=ne(r,!1);if(!t)throw new Error(`Attempted to preload a URL that does not belong to this app: ${r}`);const u=await Ke(t);if(u.type==="redirect")return{type:u.type,location:u.location};const{status:s,data:p}=(d=u.props.page)!=null?d:C;return{type:u.type,status:s,data:p}},preload_code:n=>fe(n),push_state:(n,r)=>{const t={[G]:D+=1,[W]:V,[Re]:C.url.href};ct.call(history,t,"",re(n)),C={...C,state:r},B.$set({page:C}),oe[D]=r,lt(D,V)},replace_state:(n,r)=>{const t={[G]:D,[W]:V,[Re]:C.url.href};ge.call(history,t,"",re(n)),C={...C,state:r},B.$set({page:C}),oe[D]=r},apply_action:async n=>{var r;if(n.type==="error"){const t=new URL(location.href),{branch:u,route:s}=g;if(!s)return;const p=await We(g.branch.length,u,s.errors);if(p){const d=await te({url:t,params:g.params,branch:u.slice(0,p.idx).concat(p.node),status:(r=n.status)!=null?r:500,error:n.error,route:s});g=d.state,B.$set(d.props),Ae().then(Te)}}else n.type==="redirect"?le(n.location,{invalidateAll:!0},0):(B.$set({form:null,page:{...C,form:n.data,status:n.status}}),await Ae(),B.$set({form:n.data}),n.type==="success"&&Te())},_start_router:()=>{var r;history.scrollRestoration="manual",addEventListener("beforeunload",t=>{let u=!1;if(Ge(),!k){const s=dt(g,void 0,null,"leave"),p={...s.navigation,cancel:()=>{u=!0,s.reject(new Error("navigation was cancelled"))}};l.before_navigate.forEach(d=>d(p))}u?(t.preventDefault(),t.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Ge()}),(r=navigator.connection)!=null&&r.saveData||$t(),c.addEventListener("click",t=>{var I,L;if(t.button||t.which!==1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.defaultPrevented)return;const u=rt(t.composedPath()[0],c);if(!u)return;const{url:s,external:p,target:d,download:b}=$e(u,q);if(!s)return;if(d==="_parent"||d==="_top"){if(window.parent!==window)return}else if(d&&d!=="_self")return;const m=pe(u);if(!(u instanceof SVGAElement)&&s.protocol!==location.protocol&&!(s.protocol==="https:"||s.protocol==="http:")||b)return;if(p||m.reload){Ze({url:s,type:"link"})?k=!0:t.preventDefault();return}const[$,R]=s.href.split("#");if(R!==void 0&&$===Pe(location)){if(g.url.hash===s.hash){t.preventDefault(),(I=u.ownerDocument.getElementById(R))==null||I.scrollIntoView();return}if(T=!0,Ue(D),n(s),!m.replace_state)return;T=!1}t.preventDefault(),de({type:"link",url:s,keepfocus:m.keepfocus,noscroll:m.noscroll,replace_state:(L=m.replace_state)!=null?L:s.href===location.href})}),c.addEventListener("submit",t=>{var R,I;if(t.defaultPrevented)return;const u=HTMLFormElement.prototype.cloneNode.call(t.target),s=t.submitter;if(((s==null?void 0:s.formMethod)||u.method)!=="get")return;const d=new URL((s==null?void 0:s.hasAttribute("formaction"))&&(s==null?void 0:s.formAction)||u.action);if(Ie(d,q))return;const b=t.target,m=pe(b);if(m.reload)return;t.preventDefault(),t.stopPropagation();const S=new FormData(b),$=s==null?void 0:s.getAttribute("name");$&&S.append($,(R=s==null?void 0:s.getAttribute("value"))!=null?R:""),d.search=new URLSearchParams(S).toString(),de({type:"form",url:d,keepfocus:m.keepfocus,noscroll:m.noscroll,replace_state:(I=m.replace_state)!=null?I:d.href===location.href})}),addEventListener("popstate",async t=>{var u,s,p;if((u=t.state)!=null&&u[G]){const d=t.state[G];if(Z={},d===D)return;const b=X[d],m=(s=oe[d])!=null?s:{},S=new URL((p=t.state[Re])!=null?p:location.href),$=t.state[W],R=Pe(location)===Pe(g.url);if($===V&&(ce||R)){n(S),X[D]=Ce(),b&&scrollTo(b.x,b.y),m!==C.state&&(C={...C,state:m},B.$set({page:C})),D=d;return}const L=d-D;await de({type:"popstate",url:S,popped:{state:m,scroll:b,delta:L},accept:()=>{D=d,V=$},block:()=>{history.go(-L)},nav_token:Z})}else if(!T){const d=new URL(location.href);n(d)}}),addEventListener("hashchange",()=>{T&&(T=!1,ge.call(history,{...history.state,[G]:++D,[W]:V},"",location.href))});for(const t of document.querySelectorAll("link"))t.rel==="icon"&&(t.href=t.href);addEventListener("pageshow",t=>{t.persisted&&K.navigating.set(null)});function n(t){g.url=t,K.page.set({...C,url:t}),K.page.notify()}},_hydrate:async({status:n=200,error:r,node_ids:t,params:u,route:s,data:p,form:d})=>{v=!0;const b=new URL(location.href);({params:u={},route:s={id:null}}=ne(b,!1)||{});let m;try{const S=t.map(async(I,L)=>{const j=p[L];return j!=null&&j.uses&&(j.uses=Ot(j.uses)),we({loader:e.nodes[I],url:b,params:u,route:s,parent:async()=>{const O={};for(let F=0;F<L;F+=1)Object.assign(O,(await S[F]).data);return O},server_data_node:ve(j)})}),$=await Promise.all(S),R=i.find(({id:I})=>I===s.id);if(R){const I=R.layouts;for(let L=0;L<I.length;L++)I[L]||$.splice(L,0,void 0)}m=await te({url:b,params:u,branch:$,status:n,error:r,form:d,route:R!=null?R:null})}catch(S){if(S instanceof it){await Q(new URL(S.location,location.href));return}m=await ue({status:he(S),error:await ae(S,{url:b,params:u,route:s}),url:b,route:s})}m.props.page&&(m.props.page.state={}),Ye(m)}}}async function ut(e,a){var h;const i=new URL(e);i.pathname=Dt(e.pathname),e.pathname.endsWith("/")&&i.searchParams.append(rn,"1"),i.searchParams.append(an,a.map(c=>c?"1":"0").join(""));const o=await wt(i.href);if(!o.ok){let c;throw(h=o.headers.get("content-type"))!=null&&h.includes("application/json")?c=await o.json():o.status===404?c="Not Found":o.status===500&&(c="Internal Error"),new ye(o.status,c)}return new Promise(async c=>{var v;const w=new Map,f=o.body.getReader(),y=new TextDecoder;function l(x){return kt(x,{Promise:A=>new Promise((N,k)=>{w.set(A,{fulfil:N,reject:k})})})}let g="";for(;;){const{done:x,value:A}=await f.read();if(x&&!g)break;for(g+=!A&&g?`
`:y.decode(A);;){const N=g.indexOf(`
`);if(N===-1)break;const k=JSON.parse(g.slice(0,N));if(g=g.slice(N+1),k.type==="redirect")return c(k);if(k.type==="data")(v=k.nodes)==null||v.forEach(T=>{(T==null?void 0:T.type)==="data"&&(T.uses=Ot(T.uses),T.data=l(T.data))}),c(k);else if(k.type==="chunk"){const{id:T,data:ce,error:Y}=k,B=w.get(T);w.delete(T),Y?B.reject(l(Y)):B.fulfil(l(ce))}}}})}function Ot(e){var a,i,o;return{dependencies:new Set((a=e==null?void 0:e.dependencies)!=null?a:[]),params:new Set((i=e==null?void 0:e.params)!=null?i:[]),parent:!!(e!=null&&e.parent),route:!!(e!=null&&e.route),url:!!(e!=null&&e.url),search_params:new Set((o=e==null?void 0:e.search_params)!=null?o:[])}}function Te(){const e=document.querySelector("[autofocus]");if(e)e.focus();else{const a=document.body,i=a.getAttribute("tabindex");a.tabIndex=-1,a.focus({preventScroll:!0,focusVisible:!1}),i!==null?a.setAttribute("tabindex",i):a.removeAttribute("tabindex");const o=getSelection();if(o&&o.type!=="None"){const h=[];for(let c=0;c<o.rangeCount;c+=1)h.push(o.getRangeAt(c));setTimeout(()=>{if(o.rangeCount===h.length){for(let c=0;c<o.rangeCount;c+=1){const w=h[c],f=o.getRangeAt(c);if(w.commonAncestorContainer!==f.commonAncestorContainer||w.startContainer!==f.startContainer||w.endContainer!==f.endContainer||w.startOffset!==f.startOffset||w.endOffset!==f.endOffset)return}o.removeAllRanges()}})}}}function dt(e,a,i,o){var y,l,g,v,x;let h,c;const w=new Promise((A,N)=>{h=A,c=N});return w.catch(()=>{}),{navigation:{from:{params:e.params,route:{id:(l=(y=e.route)==null?void 0:y.id)!=null?l:null},url:e.url},to:i&&{params:(g=a==null?void 0:a.params)!=null?g:null,route:{id:(x=(v=a==null?void 0:a.route)==null?void 0:v.id)!=null?x:null},url:i},willUnload:!a,type:o,complete:w},fulfil:h,reject:c}}async function fn(e,a,i){const o=sn(e,a);It({client:o}),i?await o._hydrate(i):o.goto(location.href,{replaceState:!0}),o._start_router()}export{fn as start};
